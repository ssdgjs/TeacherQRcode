# EduQR AI - æ™ºèƒ½è‹±è¯­ä½œä¸šç”Ÿæˆå™¨

<div align="center">

![EduQR AI Logo](https://img.shields.io/badge/EduQR-AI-teal-600.svg)
![Python](https://img.shields.io/badge/python-3.11+-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-latest-green.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

**AIé©±åŠ¨çš„æ™ºèƒ½è‹±è¯­ä½œä¸šç”Ÿæˆå™¨**

å¸®åŠ©è€å¸ˆå¿«é€Ÿåˆ›å»ºé«˜è´¨é‡è‹±è¯­ç»ƒä¹ é¢˜ï¼Œæ”¯æŒ6ç§é¢˜å‹ï¼Œè‡ªåŠ¨ç”ŸæˆäºŒç»´ç ï¼Œå­¦ç”Ÿæ‰«ç å³å¯æŸ¥çœ‹ã€‚

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [æ–‡æ¡£](#æ–‡æ¡£) â€¢ [éƒ¨ç½²](#éƒ¨ç½²) â€¢ [è´¡çŒ®](#è´¡çŒ®)

</div>

---

## ğŸ“– ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å®‰è£…æŒ‡å—](#å®‰è£…æŒ‡å—)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [æµ‹è¯•](#æµ‹è¯•)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æ›´æ–°æ—¥å¿—](#æ›´æ–°æ—¥å¿—)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

EduQR AI æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½çš„è‹±è¯­ä½œä¸šç”Ÿæˆå¹³å°ï¼Œä¸“ä¸ºè‹±è¯­æ•™å¸ˆè®¾è®¡ã€‚é€šè¿‡é›†æˆæ™ºè°±AI GLM-4æ¨¡å‹å’Œå¾®ä¿¡æ”¯ä»˜ï¼Œå¸®åŠ©è€å¸ˆï¼š

- ğŸ¤– **AIæ™ºèƒ½ç”Ÿæˆ**ï¼šæ ¹æ®å¹´çº§ã€ä¸»é¢˜ã€éš¾åº¦è‡ªåŠ¨ç”Ÿæˆ6ç§é¢˜å‹
- ğŸ“± **äºŒç»´ç åˆ†äº«**ï¼šä¸€é”®ç”ŸæˆäºŒç»´ç ï¼Œå­¦ç”Ÿæ‰«ç å³å¯æŸ¥çœ‹
- ğŸ§ **å¬åŠ›éŸ³é¢‘**ï¼šæ”¯æŒTTSè¯­éŸ³åˆæˆï¼Œç”Ÿæˆå¬åŠ›é¢˜éŸ³é¢‘
- ğŸ’° **çµæ´»ä»˜è´¹**ï¼šå…è´¹è¯•ç”¨ + æ¬¡æ•°åŒ…/æœˆå¡è®¢é˜…
- ğŸ“Š **å†å²ç®¡ç†**ï¼šå®Œæ•´çš„ç”Ÿæˆå†å²å’Œè®¢å•ç®¡ç†

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

#### 1. AIä½œä¸šç”Ÿæˆ
- æ”¯æŒ6ç§è‹±è¯­é¢˜å‹ï¼šé€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜ã€åˆ¤æ–­é¢˜ã€é˜…è¯»ç†è§£ã€å¬åŠ›é¢˜ã€ä½œæ–‡
- æ™ºèƒ½é¢˜ç›®ç”Ÿæˆï¼ˆåŸºäºZhipuAI GLM-4ï¼‰
- å¯é…ç½®å¹´çº§ã€ä¸»é¢˜ã€éš¾åº¦
- æ‰¹é‡ç”Ÿæˆæ”¯æŒ

#### 2. äºŒç»´ç åˆ†äº«
- è‡ªåŠ¨ç”ŸæˆçŸ­é“¾æ¥ï¼ˆBASE_URL/v/{short_id}ï¼‰
- ä¸€é”®ç”ŸæˆäºŒç»´ç å›¾ç‰‡ï¼ˆPNG 300x300ï¼‰
- å­¦ç”Ÿæ‰«ç å³å¯æŸ¥çœ‹æ ¼å¼åŒ–ä½œä¸š
- æ”¯æŒä¸‹è½½å’Œåˆ†äº«

#### 3. å¬åŠ›éŸ³é¢‘
- ç«å±±å¼•æ“TTSé›†æˆ
- 4ç§å‘éŸ³ç±»å‹ï¼šç¾å¼/è‹±å¼ Ã— ç”·å£°/å¥³å£°
- 3ç§è¯­é€Ÿï¼šæ…¢é€Ÿ/æ­£å¸¸/å¿«é€Ÿ
- MP3æ ¼å¼è¾“å‡º
- è‡ªåŠ¨æ’­æ”¾å™¨é›†æˆ

#### 4. é¢åº¦ç®¡ç†
- å…è´¹ï¼š10æ¬¡/å¤©
- æ¬¡æ•°åŒ…ï¼š100æ¬¡/Â¥9.9ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
- æœˆå¡è®¢é˜…ï¼šÂ¥9.9/æœˆï¼ˆæ— é™æ¬¡ï¼‰
- é¢åº¦ä¼˜å…ˆçº§ï¼šè®¢é˜… > è´­ä¹° > å…è´¹
- æ¯æ—¥è‡ªåŠ¨é‡ç½®

#### 5. æ”¯ä»˜ç³»ç»Ÿ
- å¾®ä¿¡æ”¯ä»˜JSAPIé›†æˆ
- è®¢å•ç®¡ç†ç³»ç»Ÿ
- æ”¯ä»˜å›è°ƒéªŒè¯
- è‡ªåŠ¨åˆ°è´¦

#### 6. ç”¨æˆ·ç•Œé¢
- ğŸŒ“ æ·±è‰²æ¨¡å¼æ”¯æŒ
- ğŸ“± ç§»åŠ¨ç«¯å‹å¥½
- âš¡ éª¨æ¶å±åŠ è½½
- ğŸ¨ ç¾è§‚çš„UIè®¾è®¡
- ğŸ”” Toasté€šçŸ¥ç³»ç»Ÿ

---

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**ï¼šFastAPI 0.100+
- **æ•°æ®åº“**ï¼šPostgreSQL 16
- **ORM**ï¼šSQLModel
- **è¿ç§»**ï¼šAlembic
- **è®¤è¯**ï¼šJWT (python-jose)
- **ä»»åŠ¡è°ƒåº¦**ï¼šAPScheduler

### AI & TTS
- **AIæ¨¡å‹**ï¼šZhipuAI GLM-4-Flash
- **TTSæœåŠ¡**ï¼šç«å±±å¼•æ“ï¼ˆVolcengineï¼‰

### å‰ç«¯
- **æ¡†æ¶**ï¼šåŸç”ŸJavaScript + TailwindCSS
- **å›¾æ ‡**ï¼šHeroicons (SVG)
- **äºŒç»´ç **ï¼šqrcode + Pillow

### éƒ¨ç½²
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **WebæœåŠ¡å™¨**ï¼šUvicorn
- **åå‘ä»£ç†**ï¼šNginx

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨Dockerï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/ssdgjs/TeacherQRcode.git
cd TeacherQRcode

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„é…ç½®

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. è®¿é—®åº”ç”¨
open http://localhost:8000
```

### æ‰‹åŠ¨å®‰è£…

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. é…ç½®æ•°æ®åº“
export DATABASE_URL="postgresql://user:pass@localhost:5432/eduqr"

# 4. åˆå§‹åŒ–æ•°æ®åº“
alembic upgrade head

# 5. å¯åŠ¨æœåŠ¡
uvicorn main:app --reload
```

---

## ğŸ“¦ å®‰è£…æŒ‡å—

### ç³»ç»Ÿè¦æ±‚

- Python 3.11+
- PostgreSQL 14+
- Docker & Docker Composeï¼ˆå¯é€‰ï¼‰

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://eduqr:your_password@localhost:5432/eduqr

# JWTå¯†é’¥ï¼ˆè‡³å°‘32å­—ç¬¦ï¼‰
JWT_SECRET_KEY=your-secret-key-min-32-characters-long

# AIæœåŠ¡é…ç½®
ZHIPU_API_KEY=your_zhipu_api_key

# TTSæœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
VOLCENGINE_ACCESS_KEY=your_volcengine_access_key
VOLCENGINE_SECRET_KEY=your_volcengine_secret_key

# å¾®ä¿¡æ”¯ä»˜é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼‰
WECHAT_APP_ID=your_wechat_app_id
WECHAT_MCH_ID=your_wechat_mch_id
WECHAT_API_KEY=your_wechat_api_key
WECHAT_NOTIFY_URL=https://your-domain.com/api/v1/payment/callback

# åº”ç”¨é…ç½®
BASE_URL=http://localhost:8000
ADMIN_PASSWORD=your_admin_password
FREE_DAILY_LIMIT=10
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®

```python
# PostgreSQLè¿æ¥
DATABASE_URL = "postgresql://user:password@host:port/database"

# è¿æ¥æ± è®¾ç½®
engine = create_engine(
    DATABASE_URL,
    pool_size=5,
    max_overflow=10,
    pool_pre_ping=True
)
```

### AIæœåŠ¡é…ç½®

```python
# æ¨¡å‹é€‰æ‹©
model = "glm-4-flash"  # æ€§ä»·æ¯”é«˜

# å‚æ•°é…ç½®
temperature = 0.7  # åˆ›é€ æ€§
top_p = 0.9       # é‡‡æ ·
max_tokens = 2000 # æœ€å¤§é•¿åº¦
```

### é¢åº¦é…ç½®

```python
# å…è´¹é¢åº¦
FREE_DAILY_LIMIT = 10  # æ¯å¤©10æ¬¡

# æ¬¡æ•°åŒ…
PACKAGE_PRICE = 990    # Â¥9.90ï¼ˆåˆ†ä¸ºå•ä½ï¼‰
PACKAGE_COUNT = 100    # 100æ¬¡

# æœˆå¡
MONTHLY_PRICE = 990    # Â¥9.90
MONTHLY_DAYS = 30      # 30å¤©
```

---

## ğŸ“š APIæ–‡æ¡£

### æ ¸å¿ƒç«¯ç‚¹

#### è®¤è¯
- `POST /api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/v1/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

#### é¢åº¦
- `GET /api/v1/quota` - è·å–ç”¨æˆ·é¢åº¦
- `POST /api/v1/quota/consume` - æ¶ˆè´¹é¢åº¦

#### AIç”Ÿæˆ
- `POST /api/v1/homework/generate` - ç”Ÿæˆä½œä¸š

#### å†å²è®°å½•
- `GET /api/v1/homework/history` - è·å–å†å²è®°å½•
- `GET /api/v1/homework/{id}` - è·å–ä½œä¸šè¯¦æƒ…
- `DELETE /api/v1/homework/{id}` - åˆ é™¤ä½œä¸š

#### æ”¯ä»˜
- `POST /api/v1/payment/create-order` - åˆ›å»ºè®¢å•
- `POST /api/v1/payment/callback` - æ”¯ä»˜å›è°ƒ

### äº¤äº’å¼æ–‡æ¡£

å¯åŠ¨æœåŠ¡åè®¿é—®ï¼š
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

---

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. æ„å»ºé•œåƒ
docker-compose build

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 4. åœæ­¢æœåŠ¡
docker-compose down
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. Nginxé…ç½®

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /static {
        alias /path/to/app/static;
    }
}
```

#### 2. SSL/TLSé…ç½®

```bash
# ä½¿ç”¨Let's Encrypt
sudo certbot --nginx -d your-domain.com
```

#### 3. SystemdæœåŠ¡

```ini
[Unit]
Description=EduQR AI Application
After=network.target

[Service]
Type=notify
User=www-data
WorkingDirectory=/path/to/app
Environment="PATH=/path/to/venv/bin"
ExecStart=/path/to/venv/bin/uvicorn main:app
Restart=always

[Install]
WantedBy=multi-user.target
```

---

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# 1. å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install -r requirements-test.txt

# 2. è®¾ç½®pre-commité’©å­ï¼ˆå¯é€‰ï¼‰
pip install pre-commit
pre-commit install

# 3. è¿è¡Œå¼€å‘æœåŠ¡å™¨
uvicorn main:app --reload --log-level debug

# 4. è¿è¡Œæµ‹è¯•
pytest tests/ -v
```

### ä»£ç é£æ ¼

é¡¹ç›®éµå¾ªPEP 8è§„èŒƒï¼š

```bash
# ä»£ç æ ¼å¼åŒ–
black .
isort .

# ç±»å‹æ£€æŸ¥
mypy .

# ä»£ç æ£€æŸ¥
flake8
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨`main.py`ä¸­æ·»åŠ è·¯ç”±
2. åœ¨`models.py`ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
3. åœ¨`tests/`ä¸­æ·»åŠ æµ‹è¯•
4. æ›´æ–°æ–‡æ¡£

---

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_auth.py -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest tests/ --cov=. --cov-report=html

# ä½¿ç”¨æµ‹è¯•è„šæœ¬
./run_tests.sh
```

### æµ‹è¯•è¦†ç›–ç‡

| æ¨¡å— | è¦†ç›–ç‡ |
|------|--------|
| auth | 85% |
| quota | 80% |
| ai_service | 75% |
| payment | 60% |
| routes | 70% |
| models | 90% |

---

## â“ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜**ï¼š`could not connect to server`

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥PostgreSQLæ˜¯å¦è¿è¡Œ
docker-compose ps postgres

# æ£€æŸ¥æ•°æ®åº“URL
echo $DATABASE_URL

# é‡å¯æ•°æ®åº“
docker-compose restart postgres
```

### 2. AIç”Ÿæˆå¤±è´¥

**é—®é¢˜**ï¼š`AIç”Ÿæˆå¤±è´¥: API error`

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥APIå¯†é’¥
echo $ZHIPU_API_KEY

# æµ‹è¯•APIè¿æ¥
curl http://localhost:8000/api/v1/ai/test
```

### 3. æ”¯ä»˜å›è°ƒ404

**é—®é¢˜**ï¼šå¾®ä¿¡æ”¯ä»˜å›è°ƒè¿”å›404

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥BASE_URLé…ç½®
echo $BASE_URL

# ç¡®ä¿å›è°ƒURLå¯è®¿é—®
curl -X POST https://your-domain.com/api/v1/payment/callback
```

### 4. é¢åº¦æœªé‡ç½®

**é—®é¢˜**ï¼šå…è´¹é¢åº¦æ¯å¤©æ²¡æœ‰é‡ç½®

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥è°ƒåº¦å™¨çŠ¶æ€
curl http://localhost:8000/api/v1/scheduler/info

# æ‰‹åŠ¨è§¦å‘é‡ç½®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
# åœ¨Pythonä¸­ï¼š
from quota import reset_daily_quotas_if_needed
from database import get_session
reset_daily_quotas_if_needed(next(get_session()))
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 - æ­£å¼å‘å¸ƒï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰

- âœ… å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… AIæ™ºèƒ½ä½œä¸šç”Ÿæˆ
- âœ… äºŒç»´ç è‡ªåŠ¨ç”Ÿæˆ
- âœ… TTSå¬åŠ›éŸ³é¢‘
- âœ… é¢åº¦ç®¡ç†
- âœ… å¾®ä¿¡æ”¯ä»˜é›†æˆ
- âœ… å†å²è®°å½•ç®¡ç†
- âœ… æ·±è‰²æ¨¡å¼
- âœ… å®Œæ•´çš„æµ‹è¯•è¦†ç›–
- âœ… ç”Ÿäº§å°±ç»ª

[æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—](CHANGELOG.md)

### å†å²ç‰ˆæœ¬

- [v0.9.0 - æµ‹è¯•ä¸Bugä¿®å¤](V0.9.0_RELEASE_NOTES.md)
- [v0.8.0 - å‰ç«¯ä¼˜åŒ–](V0.8.0_RELEASE_NOTES.md)
- [v0.7.0 - æ”¯ä»˜é›†æˆ](V0.7.0_RELEASE_NOTES.md)
- [v0.6.0 - å†å²è®°å½•ç®¡ç†](V0.6.0_RELEASE_NOTES.md)
- [v0.5.0 - äºŒç»´ç æ•´åˆ](V0.5.0_RELEASE_NOTES.md)
- [v0.4.0 - TTSéŸ³é¢‘ç”Ÿæˆ](V0.4.0_RELEASE_NOTES.md)
- [v0.3.0 - AIä½œä¸šç”Ÿæˆ](V0.3.0_RELEASE_NOTES.md)
- [v0.2.0 - é¢åº¦ç®¡ç†](V0.2.0_RELEASE_NOTES.md)
- [v0.1.0 - ç”¨æˆ·è®¤è¯](V0.1.0_RELEASE_NOTES.md)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

### å¼€å‘è§„èŒƒ

- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ æµ‹è¯•è¦†ç›–æ–°åŠŸèƒ½
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ‘¥ ä½œè€…

- **yangfanm4mini** - ä¸»è¦å¼€å‘è€…

---

## ğŸ™ è‡´è°¢

- [ZhipuAI](https://open.bigmodel.cn/) - AIæ¨¡å‹æ”¯æŒ
- [FastAPI](https://fastapi.tiangolo.com/) - Webæ¡†æ¶
- [SQLModel](https://sqlmodel.tiangolo.com/) - ORM
- [TailwindCSS](https://tailwindcss.com/) - CSSæ¡†æ¶

---

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHub**: https://github.com/ssdgjs/TeacherQRcode
- **åœ¨çº¿æ¼”ç¤º**: http://182.254.159.223:8000
- **é—®é¢˜åé¦ˆ**: https://github.com/ssdgjs/TeacherQRcode/issues

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªæ˜Ÿæ ‡æ”¯æŒï¼**

Made with â¤ï¸ by EduQR Team

</div>
